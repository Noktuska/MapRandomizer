v116:
- DONE: "Technical" item progression preset
- DONE: implement map subsubareas
- DONE: new map pools
- consider adding hazard tape behind Fast Pillars Setup Room top right
  - maybe behind Aqueduct top left?
- implement settings upgrade process
- DONE: implement implicit canHorizontalShinespark for comeInWithSpark, also canMidairShinespark
- DONE: fix: 1st zebetite destroyable without clearing objectives: http://localhost:8080/logic/room/238/2/2/38
- implement useImplicitComeInNormally, useImplicitLeaveNormally, useImplicitComeInWithMockball
- remove framesRequired/framesRemaining from comeInShinecharged/leaveShinecharged schema
  - replace with "shineChargeFrames" logical requirement, and add test to ensure it is included.
- farming strats: design new schema
- have auto-formatting also auto-order object properties by schema order
- DONE: fix issue from PR #120 with `reserve_hud` overwriting old `escape.asm` code.
- finish pass of adding shinecharge strats?

TODO:
- improve formatting of logic pages to make them easier to read
  - convert and/or to bulleted lists?
  - hyperlinks
  - maybe have a toggle to switch between a code/JSON view, vs. a more broadly understandable view
- fix clippy lints and set up as part of CI
- adjust etecoon door spawn fix to be more minimal:
  - have the door just be immediately closed, rather than spawning in wrong location.
- set up a build process for the ASM patches
- issue with Single Chamber door sometimes closing in wrong position: https://discord.com/channels/1053421401354285129/1053434532973510748/1300191178595110943
  - also happens in Warehouse Entrance: https://discord.com/channels/1053421401354285129/1053434532973510748/1310613115313848461
  - only happens when using vanilla reserve HUD (not revamped)
- simplify SeedData
- Make f_allItemsSpawn not be a flag?
- maybe add canTrickyDodgeEnemies to more places, e.g. Morph Ball Room?
- map hub: fast travel?
- link to logic pages from video site?
- adjust auto-formatting for unlocksDoors
- handle steep starting down tile better: only should affect short-charging, not other uses of runways
- fix bug where dachora despawns global zeela in Dachora Room.
  - probably caused by escape.asm: missing ",x" in stz, also check for Landing Site room ID so that it won't affect Dachora Room
- show transition arrows in connecting areas when map is revealed
- Fix glass tunnel PLM drawing: https://github.com/amoebaOfDoom/subversion/blob/master/Project/ASM/PLM%20draw%20fix.asm
- prevent empty tiles (grid lines only) from showing as explored on mini-map?
- model energy usage in the escape.
  - can be necessary to ensure beatability of seeds with reduced items and disabled escape refill.
- possible QoL: while pause menu is fading in, press R to immediately initiate switching to equipment screen
- add option to reroll seeds with not enough difficult required tricks?
- instructions on gmode and artificial morph
- fix g4 start location problem: https://discord.com/channels/1053421401354285129/1053434532973510748/1230346387628101643
- fix issue with Low/Off QoL Chozo Desolate hanging the randomizer (won't place SpaceJump).
- fix x-ray graphical glitches (seen in MemesAreHealthy seed):
  - affecting top row of HUD, etc.
- map room teleports?
- update protogen sprite?
- look into faster decompression:
  - decompressor: https://github.com/tewtal/SHVC-LZSA2/blob/main/src/asar/lzsa2.asm
  - compressor: https://github.com/emmanuel-marty/lzsa
- fix weapon PowerBomb logic:
  - take into account that double hit is not possible with PowerBombPeriphery
  - take into account multiplier
- fix escape door staying open when entering from left (should close in MB1->MB2 cutscene?)
- Remove unneeded items from last step in Desolate.
- heated elevator: mark with red platform?
- Debug eddie desolate seed:
  - https://maprando.com/seed/tPRO8Krh2LxvnQvA0HZzaw/
  - Why placed Grapple and Wasteland ETank?
- debug door lock logic:
  - door requiring heat frames to unlock from unheated side: http://localhost:8080/seed/UCp7ZDC5H6ZSmDlKOtYBXw/data/visualizer/index.html
- in logic pages From/To node selections, improve contrast for grayed-out nodes.
- fix vanilla map music when "Random" start puts you in room with no music change (plays title screen music).
- add more "carry shinecharge" strats.
- handle door locks and flags more precisely; account for them when considering which key item to place
- fix issue with pause map scrolling beyond bounds
- spoiler map: show pop-up when hovering over step, to show additional collectible items (with their quantities) and instructions
  to double-click for details.
- rework QoL presets?:
  - keep same map options between Low and Default?
- consider making shaktool room one-way in map generation (so Reverse Shaktool strat could be moved up to Medium)
- have pause map mark most recent save (like in vanilla)
- fix OOB when leaving Kraid Room from right during fight
- main street shinespark frames need some looking into: "frames": 35 doesn't make sense?
- convert area arrows vs. letters to customization option
- remove implicit g-mode go back through door strats for up doors.
- add leaveRunningBlue exit condition (matching with comeInShinecharging)
- refine GT logic: not in logic with 7E+4R and 5 Supers, Grapple.
- make start locations and hub locations only use door nodes
  - that way much less risk of getting broken (or made unsound) by logic changes
- map pools with movable toilet
- look into possible quicksave/load patch (like save states but not emulator-dependent)
  - could work better with music: continue playing same song or start from beginning if different
  - could retain game timer shown in credits
  - could retain map progress
  - could expire after a certain number of door transitions (e.g. 4?) or when using a save station
     - prevent accidental quickloads from losing lots of progress
     - retain incentive to use real save stations
- logic:
  - mama turtle right item is basic with no items. is this ok?
  - post croc farm room with ice to get to top left is basic. should be "canTrickyUseFrozenEnemies" or "canCameraManip"?
- assume filler items are collected, when determining hard locations for key items?
- for key items, skip options that are filler (including already-placed semi-filler)?
- link to twin room in logic room pages.
- add physics/heated override to runway geometry
- clear SRAM more fully when saved seed does not match:
  - save slot position is apparently being retained (e.g. starting with cursor on slot 3)
- revamp strat page: 
  - embed the video directly near the top? 
  - collapse the room diagram
- List notable strats in the main logic page?
- add a logic page for each difficulty tier (similar to the sections within the Generate page)
- clarify gate glitch leniency: that it doesn't apply to Pink Hopper Room gate
- consider prioritizing item placement at closer item locations relative to previous key item(s)
- speed booster hall: heat frames could be slightly less?
- overhaul two-phase randomization/customization process
  - create ROM in customization only
- make hub requirements consistent with new farm approach?
  - actually probably don't need to define hub rooms anymore:
      - just check for ability to refill each resource type from the start location and get back
- logic pages (tech/room/strat): add way to fill out items/flags/resources/obstacles to simulate logic
- add objectives:
  - Larvas: 4 special items (replacing missiles)
- Improve save station balancing
  - Define "distance" in a way that accounts for ease of access (e.g. possible item/tech dependencies)?
- Improve area clustering
- incrementally build graph traversal with increasing difficulty tiers, acquiring flags in the process.
  - will allow better accounting of the difficulty of boss fights in forced mode
  - should be faster too
  - improved spoiler log route
- show objective progress in pause menu (also zebes awake, phantoon defeated)?
  - or maybe make objective X's fade after collection?
- help buttons for rest of settings (e.g. explain boss proficiency calculations)
- logic simulator
- handle sba attacks in "enemyKill"
- "fast cutscenes" QoL option?: 
  - fast big boy cutscene
  - fast MB
  - fast saves, refills, maps?
  - item collection
- "item fanfare" option?
- "friendly" map pool option that tries to put easier rooms closer to ship, harder rooms further away
- remove dead code for drawing lava/acid on map tiles.
- strats to add to logic:
  - tricky dash jump to get out of alcatraz with Morph + HiJump + SpeedBooster only (no wall jump or bombs)
  - ice clip through crumble in Green Brin Main Shaft? (in case internal door is not blue)
  - add notable (Medium) for reverse shaktool
  - spore spawn plasma SBA
  - enemy stuck moonfalls in Pink Brin Power Bomb and West Ocean
  - R-mode forced stand-up clips (needs testing):
    - GT Room
    - double chamber: right side (CF grapple clip too), if no walljumps
    - Acid Statue Room (no need for HiJump)
    - Mickey Mouse Room (alternative to CF grapple clip?)
    - West Ocean (alternative to ice clip?)
    - Wrecked Ship East Super Room: alternative to CF clip (farm the Coverns)
    - PCJR: up through crumble? (not sure if this can work, since enemy hit kills momentum and crumble respawns. If it works, where you can jump back up before crumble respawns, then CF clip would probably also work)
  - moondance in Bowling Alley top
- mosaic visual cues etc.:
  - InnerCrateria: 
    - Metal Pirates
    - top left of East Cac Alley, brick edge is wrong
    - Wasteland fake bricks (replace with pipes?)
    - Big Pink too many fake tiles in transition between fungal and brick
- make item music tracks consistent, to eliminate music restarts that can happen between two item rooms
- fix palette fade issue when entering MB room from left (Mother Brain starts from white?)
- possibly bad idea: should getting map station add arrows to other maps (ones leading into current map)?
- see if we can do something about silent snails with Zebes asleep music
- for forced mode, also use tier below Basic?
- enhancements to momentum conservation patch
  - remove need to be holding dash or to be in spin
  - reset speed boost counter whenever momentum conservation comes into play, to avoid making it too easy to get blue
  - retain speed when turning around with spin?
  - on ground, retain horizontal speed when unmorphing
    - by pressing up (or jump, if spring ball not equipped) while holding forward
  - in air, retain horizontal speed when soft unmorphing while holding forward
- add animated GIFs on room/tech/strat pages for notable strats.
- maybe overhaul how randomization/customization phases work: run customization on client (with Rust WebAssembly?)
  - make it so that customization can use matching version from when the seed was generated
  - include more options for customization
  - ROM won't need to be provided for generation, only customization
- handle runways with conditional physics (Volcano Room, Amphitheatre, East Pants Room)
- check why Tourian Escape Room 1 runway isn't allowing Speedball strat into Wrecked Ship Main Shaft (on Expert)
- remove invisible solid tile in Tourian Escape Room 1, above transition
- maybe move enhanced Samus controls into separate option (instead of Max QoL)?
- enforce tech dependencies:
  - e.g. enabling "canPreciseWalljump" should enable dependency "canWalljump"
  - disabling "canWalljump" should disable dependent "canPreciseWalljump"
- consider "friendly reserve tank behavior" QoL option in max:
  - manually refilling to full doesn't empty the remaining reserves (requested by zero318)
  - i-frames don't expire during reserve? (though this would break double-damage boost strats)
  - no heat damage during reserve refill
  - maybe?:
    - energy recharge stations also refill reserve energy
    - collecting etank also refills reserves?
  - (not part of QoL:) fix crash when pausing on frame when auto reserve triggers 
  - See existing patch for some of these: https://metroidconstruction.com/resource.php?id=418
- "wild" item progression mode, where new item may be required to be used for the return path.
- consider idea from selicre: "what if there was a mode in which walljumps could be unlocked by visiting etecoons (and shinesparking by visiting dachora)?"
- custom demos?
- include a check that the client and server are matching versions and give a more meaningful error when they aren't
- look into botwoon requirements: 
  https://maprando.com/seed/-yvSvwjFlrfJN1NRxDi-Jw/data/visualizer/index.html
- QoL option for save station fast travel (in Max)?
- investigate problem when using quick reload (L+R+Select+Start) while unpausing with 0 energy.
- investigate: ridley gray door closed when reserve triggered (in sapphron seed)
- fix escape timer tech mapping to use reverse Amphitheatre notable for can_acid_dive
- fix missing Samus tile in Bomb message box (issue with map tile expansion patch)
- add logic override for strat to run under tourian blue hoppers from left (except with ultra-low QoL)
- logic: killing 3 musketeers with ice should require patience?
- fix toilet tile in botwoon's hallway with "vanilla map" option.
- make kraid camera act normal when entering from left?
  - same thing with spore spawn entering from bottom?
- handle (steep) slopes in runway length calculations
- 10 super botwoon should be possible in Expert (and 30 missile in Insane?)
- fix problem with disappearing typewriter text when pausing as escape sequence starts
- add a tip that you can share a seed using the URL.
- make graph traversals faster by using previous step for initial local states (probably not worth it?):
  - we'd have to do a full graph traversal to get spoiler route as a separate step, to avoid getting weird long paths
- in sm-json-data: use Ship refill in G-mode strats:
  - for strats that enter G-mode into Landing Site, use it, and then go back out still in G-mode
- fix gray door after mother brain when entering baby kraid (& metal pirates, boss rooms, etc.?)
- add patch for handling crashes? (to display the stack & registers)
- if possible, debug crash in Mt. Everest from Scottycro42 (https://clips.twitch.tv/DarlingSavageDogeMcaT-zgV9PF33MiawTpL2)
- oats seed Apr 1:
 - main street shinespark energy
 - kronic boost heatframes
 - metal pirates hitbox doesn't need plasma
- take double-hits into account correctly with reserve energy.
- check if pants room internal door connects correctly in logic
- add option (enabled on Challenge) to not treat tanks as filler items anymore after giving Varia (including the step where giving Varia)
  - maybe more general option to postpone unneeded filler items aside from missiles
- spoiler visualizer improvements (see GitHub issue)
- find some way to have forced mode take into account difficulty of defeating bosses (and other flags)
  - for each flag, identify its tier using just the flag edge (not redoing a full graph traversal)
  - then for the item placement, have the graph traversal treat that flag not as free but as whatever difficulty it was.
- fix graphics in door transitions?
- fix (sometimes?) glitched right door in GT. X-Ray showed a plasma beam inside it
- make quick reload work while in pause menu?
- refine cross room shinesparks:
    - slopes
- fix bug where suit color does not change when changing suits while taking damage (e.g. lava dive)?
- fix bug where music is wrong after quick reload (even after going to next room).
- clean up the web service, to reduce the amount of boilerplate plumbing settings around.
- figure out why some rooms are dark (some FX other than palette FX?)
- fixes/improvements to area palettes:
  - add back palette FX glows using correct palettes.
  - fix palette in Crocomire cutscene when wall collapses
  - fix cutscene between MB1 and MB2
  - fix background during Ridley fight
- During escape, block backward path using room setup ASM instead of door ASM (so it can still work after leaving room another way)
  - when going into room with no doorcap (e.g. escape room 1, glass tunnel) fix how gray door appears:
    - shift to the right a tile.
    - maybe use wall PLM instead of gray door
  - or, possibly better idea: don't spawn a gray door or wall, just have it take you into post-MB-fight state of MB room
    (like escape auto-save does).
- make separate option for patching out major glitches?
  - include GT code, Spacetime beam (currently patched out)
  - make OOB cause instant death?
  - others
- Better validation/error-handling of web service
  - push more validation into client
- Add note to strat in Post-Crocomire farming room to get to top-left with HiJump
  (run on platform enemy and jump)
- Use separate worker pool to run randomization (to avoid blocking web requests)
- Rust cleanup:
    - Use `serde_json` instead of `json` crate for loading sm-json-data.
    - Clean up error handling: get rid of a bunch of remaining unwrap()'s, etc.
- Make Gravity-only Samus palette different from Gravity+Varia?
    - Figure out how this can work with custom sprites.
- Consider rejecting cases where the set of bireachable item locations grows too slow or too fast.
- fix tiny bug: when bottom-left door of landing site is an area transition, the arrow shows up from the beginning
  of the game (due to running the door ASM while loading the game)
- fix internal checksum in output ROM
- fix suit graphics not showing after getting suit (consequence of skipping animation)?
- have forced mode take into account return path?
  - probably bad idea, because returning may not be required (before getting another item that makes it easier).


maybe someday?:
- minimizer mode? (select rooms to include randomly, hand-picked, and/or user-selected)
- make map rando for other hacks (e.g. project base, subversion?)
  - would be a lot of work. we could invite others to help implement the logic
- randomize which rooms are heated or submerged in water.
  - requires all new logic


rejected ideas (probably):
- set boss flag immediately when boss dies.
- balance boss distribution (one boss per area, corresponding to vanilla?)
- consider moving the MB barriers to the right one tile (or two?), to make them interfere less with ice zeb skip.
- Option for anti-softlock patches (e.g. in Moat, Early Supers, etc.)?
  - disable acid trigger in Leodox room?
